#include <stdio.h>
#include <urlmon.h>
#include <iostream>

#pragma comment(lib, "urlmon.lib")

using namespace std;

LPCWSTR url = L"192.168.198.129/hello.exe";
LPCWSTR filename = L"D:\\test\\hello.exe";

int main() {

	HRESULT result = URLDownloadToFileW(NULL, L"http://192.168.198.129/hello.exe", L"D:\\test\\hello.exe", 0, NULL);

	if (result == S_OK) {
		printf("ok");
	}
	else if (result == E_OUTOFMEMORY) {
		printf("out of memory");
	}
	else if (result == INET_E_DOWNLOAD_FAILURE) {
		printf("faile to download");
	}
	cout << result << endl;
	
	return 0;
}
